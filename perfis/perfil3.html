<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Vigas Retangulares</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        input, select, button {
            display: block;
            margin: 10px 0;
            width: 100%;
            padding: 10px;
            font-size: 16px;
        }
        h2 {
            text-align: center;
        }
        .resultado {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Calculadora de Vigas Retangulares</h2>
        <form id="calcForm">
            <label for="momentoFletor">Momento Fletor (kN.m):</label>
            <input type="number" id="momentoFletor" step="0.01">

            <label for="forca">Força Axial (kN):</label>
            <input type="number" id="forca" step="0.01">

            <label for="cargaTransversal">Carga Transversal (kN):</label>
            <input type="number" id="cargaTransversal" step="0.01">

            <label for="altura">Altura da Seção (mm):</label>
            <input type="number" id="altura" step="0.01">

            <label for="largura">Largura da Seção (mm):</label>
            <input type="number" id="largura" step="0.01">

            <label for="fck">Fck (MPa):</label>
            <select id="fck">
                <option value="15">15</option>
                <option value="20">20</option>
                <option value="25">25</option>
                <option value="30">30</option>
                <option value="35">35</option>
                <option value="40">40</option>
                <option value="45">45</option>
                <option value="50">50</option>
            </select>

            <label for="tipoAco">Tipo de Aço:</label>
            <select id="tipoAco">
                <option value="500">Aço CA-50</option>
                <option value="600">Aço CA-60</option>
                <!-- Adicionar outros tipos de aço conforme necessário -->
            </select>

            <label for="diametroAco">Diâmetro da Barra de Aço (mm):</label>
            <select id="diametroAco" onchange="atualizarAreaBitola()">
                <option value="8">8</option>
                <option value="10">10</option>
                <option value="12">12</option>
                <option value="16">16</option>
                <option value="20">20</option>
                <option value="25">25</option>
                <!-- Adicionar outros diâmetros conforme necessário -->
            </select>

            <label for="areaBitola">Área da Bitola (mm²):</label>
            <input type="number" id="areaBitola" step="0.01" readonly>

            <label for="tipoEsforco">Tipo de Esforço:</label>
            <select id="tipoEsforco">
                <option value="flexaoSimples">Flexão Simples</option>
                <option value="flexaoComposta">Flexão Composta</option>
                <option value="cisalhamento">Cisalhamento</option>
                <option value="flambagem">Flambagem</option>
                <option value="combinado">Combinado</option>
            </select>

            <label for="comprimentoEfeito">Comprimento de Efeito (mm, para flambagem):</label>
            <input type="number" id="comprimentoEfeito" step="0.01">

            <button type="button" onclick="calcular()">Calcular</button>
        </form>
        <div id="resultado" class="resultado"></div>
    </div>

    <script>
        const areasBitola = {
            8: 50.3,
            10: 78.5,
            12: 113.1,
            16: 201.1,
            20: 314.2,
            25: 490.9
            // Adicionar mais áreas conforme necessário
        };

        function atualizarAreaBitola() {
            const diametro = document.getElementById('diametroAco').value;
            document.getElementById('areaBitola').value = areasBitola[diametro] || 0;
        }

        function calcular() {
            const momentoFletor = parseFloat(document.getElementById('momentoFletor').value) * 1e6; // Convert kN.m to N.mm
            const forca = parseFloat(document.getElementById('forca').value) * 1e3; // Convert kN to N
            const cargaTransversal = parseFloat(document.getElementById('cargaTransversal').value) * 1e3; // Convert kN to N
            const altura = parseFloat(document.getElementById('altura').value);
            const largura = parseFloat(document.getElementById('largura').value);
            const fck = parseFloat(document.getElementById('fck').value);
            const tipoAco = parseFloat(document.getElementById('tipoAco').value);
            const areaBitola = parseFloat(document.getElementById('areaBitola').value);
            const tipoEsforco = document.getElementById('tipoEsforco').value;
            const comprimentoEfeito = parseFloat(document.getElementById('comprimentoEfeito').value);

            const fcd = fck / 1.4; // Resistência de cálculo do concreto (N/mm²)
            const fyd = tipoAco; // Tensão de cálculo do aço (N/mm²)

            let resultadoHtml = '';

            switch (tipoEsforco) {
                case 'flexaoSimples':
                    resultadoHtml = calcularFlexaoSimples(momentoFletor, altura, largura, fcd, areaBitola, fyd);
                    break;
                case 'flexaoComposta':
                    resultadoHtml = calcularFlexaoComposta(momentoFletor, forca, altura, largura, fcd, areaBitola, fyd);
                    break;
                case 'cisalhamento':
                    resultadoHtml = calcularCisalhamento(cargaTransversal, altura, largura, fcd, areaBitola, fyd);
                    break;
                case 'flambagem':
                    resultadoHtml = calcularFlambagem(comprimentoEfeito, fyd, altura, largura, fcd);
                    break;
                case 'combinado':
                    resultadoHtml = calcularCombinado(momentoFletor, forca, cargaTransversal, altura, largura, fcd, areaBitola, fyd);
                    break;
            }

            resultadoHtml += determinarEstadio(momentoFletor, forca, cargaTransversal, altura, largura, fcd, areaBitola, fyd);

            document.getElementById('resultado').innerHTML = resultadoHtml;
        }

        function determinarEstadio(momentoFletor, forca, cargaTransversal, altura, largura, fcd, areaBitola, fyd) {
            const As = areaBitola;
            const h = altura;
            const b = largura;

            const fcd = fck / 1.4; // Resistência de cálculo do concreto (N/mm²)
            const Msd = momentoFletor;
            const Asmin = 0.0018 * b * h; // Área mínima de aço

            let estadio = 'Desconhecido';
            if (Msd <= fcd * b * h * 0.5) {
                estadio = 'Estádio I: Fase Elástica';
            } else if (Msd <= fcd * b * h) {
                estadio = 'Estádio II: Fase de Fissuração no Concreto';
            } else if (Msd > fcd * b * h && Msd <= fyd * As) {
                estadio = 'Estádio III: Ruptura do Aço';
            } else {
                estadio = 'Estádio IV: Ruptura do Concreto';
            }

            return `<p>${estadio}</p>`;
        }

        function calcularFlexaoSimples(momentoFletor, altura, largura, fcd, areaBitola, fyd) {
            const b = largura;
            const h = altura;
            const Msd = momentoFletor;
            const AsNecessaria = (Msd * 1000) / (0.87 * fyd * (h / 2 - 0.5 * (h / 2)));

            const numeroBarras = Math.ceil(AsNecessaria / areaBitola);

            return `
                <h3>Resultados para Flexão Simples</h3>
                <p>Área de Aço Necessária: ${AsNecessaria.toFixed(2)} mm²</p>
                <p>Número de Barras de Aço (8mm): ${numeroBarras}</p>
            `;
        }

        function calcularFlexaoComposta(momentoFletor, forca, altura, largura, fcd, areaBitola, fyd) {
            const b = largura;
            const h = altura;
            const Msd = momentoFletor;
            const Nsd = forca;

            // Suponha um cálculo para flexão composta
            const AsNecessaria = (Msd * 1000) / (0.87 * fyd * (h / 2 - 0.5 * (h / 2)));

            const numeroBarras = Math.ceil(AsNecessaria / areaBitola);

            return `
                <h3>Resultados para Flexão Composta</h3>
                <p>Área de Aço Necessária: ${AsNecessaria.toFixed(2)} mm²</p>
                <p>Número de Barras de Aço (8mm): ${numeroBarras}</p>
            `;
        }

        function calcularCisalhamento(cargaTransversal, altura, largura, fcd, areaBitola, fyd) {
            const b = largura;
            const h = altura;
            const Vd = cargaTransversal;

            const Av = 0.4 * Vd / (fcd * b);
            const numeroBarras = Math.ceil(Av / areaBitola);

            return `
                <h3>Resultados para Cisalhamento</h3>
                <p>Área de Aço para Cisalhamento: ${Av.toFixed(2)} mm²</p>
                <p>Número de Barras de Aço (8mm): ${numeroBarras}</p>
            `;
        }

        function calcularFlambagem(comprimentoEfeito, fyd, altura, largura, fcd) {
            const b = largura;
            const h = altura;
            const E = 210000; // Módulo de elasticidade do aço em MPa
            const I = (b * Math.pow(h, 3)) / 12;
            const L = comprimentoEfeito;

            const Nc = (Math.PI * Math.PI * E * I) / (L * L);

            return `
                <h3>Resultados para Flambagem</h3>
                <p>Capacidade de Flambagem: ${Nc.toFixed(2)} kN</p>
            `;
        }

        function calcularCombinado(momentoFletor, forca, cargaTransversal, altura, largura, fcd, areaBitola, fyd) {
            const flexao = calcularFlexaoSimples(momentoFletor, altura, largura, fcd, areaBitola, fyd);
            const cisalhamento = calcularCisalhamento(cargaTransversal, altura, largura, fcd, areaBitola, fyd);
            
            return `
                <h3>Resultados para Esforços Combinados</h3>
                ${flexao}
                ${cisalhamento}
            `;
        }
    </script>
</body>
</html>
