<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Perfis Estruturais</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        #perfilCanvas {
            border: 1px solid #000;
            margin-top: 20px;
        }
        .input-group {
            margin-bottom: 15px;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <h1>Calculadora de Perfis Estruturais</h1>
    <form id="perfilForm">
        <div>
            <label for="perfilType">Tipo de Perfil:</label>
            <select id="perfilType" name="perfilType">
                <option value="">Selecione um perfil</option>
                <option value="i">Perfil I</option>
                <option value="c">Perfil C</option>
                <option value="l">Perfil L</option>
                <option value="t">Perfil T</option>
                <option value="ct">Perfil Circular</option>
                <option value="qt">Perfil Quadrado</option>
            </select>
        </div>
        <div id="inputFields"></div>
        <button type="submit">Calcular</button>
    </form>
    <p id="errorMessage" style="color: red;"></p>
    <h2>Resultados:</h2>
    <pre id="resultados"></pre>
    <canvas id="perfilCanvas" width="500" height="300"></canvas>

    <script>
        const perfilForm = document.getElementById('perfilForm');
        const perfilCanvas = document.getElementById('perfilCanvas');
        const resultados = document.getElementById('resultados');
        const errorMessage = document.getElementById('errorMessage');

        const densidadeAco = 7850; // kg/m³ para aço A36

        function gerarCamposEntrada(tipo) {
            const campos = {
                i: `
                    <div class="input-group">
                        <label for="altura">Altura (h) [mm]:</label>
                        <input type="number" id="altura" name="altura" step="0.01">
                    </div>
                    <div class="input-group">
                        <label for="largura">Largura (b) [mm]:</label>
                        <input type="number" id="largura" name="largura" step="0.01">
                    </div>
                    <div class="input-group">
                        <label for="espessuraWeb">Espessura da Alma (tw) [mm]:</label>
                        <input type="number" id="espessuraWeb" name="espessuraWeb" step="0.01">
                    </div>
                    <div class="input-group">
                        <label for="espessuraFlange">Espessura da Flange (tf) [mm]:</label>
                        <input type="number" id="espessuraFlange" name="espessuraFlange" step="0.01">
                    </div>
                    <div class="input-group">
                        <label for="comprimento">Comprimento (L) [m]:</label>
                        <input type="number" id="comprimento" name="comprimento" step="0.01">
                    </div>
                `,
                c: `
                    <div class="input-group">
                        <label for="alturaC">Altura (h) [mm]:</label>
                        <input type="number" id="alturaC" name="alturaC" step="0.01">
                    </div>
                    <div class="input-group">
                        <label for="larguraC">Largura (b) [mm]:</label>
                        <input type="number" id="larguraC" name="larguraC" step="0.01">
                    </div>
                    <div class="input-group">
                        <label for="espessuraC">Espessura da Parede (t) [mm]:</label>
                        <input type="number" id="espessuraC" name="espessuraC" step="0.01">
                    </div>
                    <div class="input-group">
                        <label for="comprimentoC">Comprimento (L) [m]:</label>
                        <input type="number" id="comprimentoC" name="comprimentoC" step="0.01">
                    </div>
                `,
                l: `
                    <div class="input-group">
                        <label for="comprimentoL1">Comprimento do Lado 1 (L1) [mm]:</label>
                        <input type="number" id="comprimentoL1" name="comprimentoL1" step="0.01">
                    </div>
                    <div class="input-group">
                        <label for="comprimentoL2">Comprimento do Lado 2 (L2) [mm]:</label>
                        <input type="number" id="comprimentoL2" name="comprimentoL2" step="0.01">
                    </div>
                    <div class="input-group">
                        <label for="espessuraL">Espessura (t) [mm]:</label>
                        <input type="number" id="espessuraL" name="espessuraL" step="0.01">
                    </div>
                    <div class="input-group">
                        <label for="comprimento">Comprimento (L) [m]:</label>
                        <input type="number" id="comprimento" name="comprimento" step="0.01">
                    </div>
                `,
                t: `
                    <div class="input-group">
                        <label for="alturaT">Altura (h) [mm]:</label>
                        <input type="number" id="alturaT" name="alturaT" step="0.01">
                    </div>
                    <div class="input-group">
                        <label for="larguraT">Largura (b) [mm]:</label>
                        <input type="number" id="larguraT" name="larguraT" step="0.01">
                    </div>
                    <div class="input-group">
                        <label for="espessuraT">Espessura (t) [mm]:</label>
                        <input type="number" id="espessuraT" name="espessuraT" step="0.01">
                    </div>
                    <div class="input-group">
                        <label for="comprimentoT">Comprimento (L) [m]:</label>
                        <input type="number" id="comprimentoT" name="comprimentoT" step="0.01">
                    </div>
                `,
                ct: `
                    <div class="input-group">
                        <label for="diametro">Diâmetro (d) [mm]:</label>
                        <input type="number" id="diametro" name="diametro" step="0.01">
                    </div>
                    <div class="input-group">
                        <label for="espessuraCT">Espessura da Parede (t) [mm]:</label>
                        <input type="number" id="espessuraCT" name="espessuraCT" step="0.01">
                    </div>
                    <div class="input-group">
                        <label for="comprimentoCT">Comprimento (L) [m]:</label>
                        <input type="number" id="comprimentoCT" name="comprimentoCT" step="0.01">
                    </div>
                `,
                qt: `
                    <div class="input-group">
                        <label for="lado">Lado (a) [mm]:</label>
                        <input type="number" id="lado" name="lado" step="0.01">
                    </div>
                    <div class="input-group">
                        <label for="espessuraQT">Espessura (t) [mm]:</label>
                        <input type="number" id="espessuraQT" name="espessuraQT" step="0.01">
                    </div>
                    <div class="input-group">
                        <label for="comprimentoQT">Comprimento (L) [m]:</label>
                        <input type="number" id="comprimentoQT" name="comprimentoQT" step="0.01">
                    </div>
                `
            };

            document.getElementById('inputFields').innerHTML = campos[tipo] || '';
        }

        function desenharPerfil(tipo, dados) {
            const ctx = perfilCanvas.getContext('2d');
            ctx.clearRect(0, 0, perfilCanvas.width, perfilCanvas.height);
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 2;

            switch(tipo) {
                case 'i':
                    // Desenho Perfil I
                    ctx.beginPath();
                    ctx.moveTo(dados.largura / 2, 0);
                    ctx.lineTo(dados.largura / 2, dados.altura - dados.espessuraWeb);
                    ctx.lineTo(dados.largura / 2 - dados.espessuraFlange, dados.altura - dados.espessuraWeb);
                    ctx.lineTo(dados.largura / 2 - dados.espessuraFlange, dados.altura);
                    ctx.lineTo(dados.largura / 2 + dados.espessuraFlange, dados.altura);
                    ctx.lineTo(dados.largura / 2 + dados.espessuraFlange, dados.altura - dados.espessuraWeb);
                    ctx.lineTo(dados.largura / 2, dados.altura - dados.espessuraWeb);
                    ctx.closePath();
                    ctx.stroke();
                    break;
                case 'c':
                    // Desenho Perfil C
                    ctx.beginPath();
                    ctx.moveTo(0, 0);
                    ctx.lineTo(dados.largura, 0);
                    ctx.lineTo(dados.largura, dados.altura - dados.espessuraC);
                    ctx.lineTo(dados.largura - dados.espessuraC, dados.altura - dados.espessuraC);
                    ctx.lineTo(dados.largura - dados.espessuraC, dados.altura);
                    ctx.lineTo(0, dados.altura);
                    ctx.closePath();
                    ctx.stroke();
                    break;
                case 'l':
                    // Desenho Perfil L
                    ctx.beginPath();
                    ctx.moveTo(0, 0);
                    ctx.lineTo(dados.comprimentoL1, 0);
                    ctx.lineTo(dados.comprimentoL1, dados.espessuraL);
                    ctx.lineTo(dados.comprimentoL2, dados.espessuraL);
                    ctx.lineTo(dados.comprimentoL2, dados.comprimentoL2);
                    ctx.lineTo(0, dados.comprimentoL2);
                    ctx.closePath();
                    ctx.stroke();
                    break;
                case 't':
                    // Desenho Perfil T
                    ctx.beginPath();
                    ctx.moveTo(0, 0);
                    ctx.lineTo(dados.larguraT, 0);
                    ctx.lineTo(dados.larguraT, dados.espessuraT);
                    ctx.lineTo(dados.larguraT / 2 + dados.espessuraT / 2, dados.espessuraT);
                    ctx.lineTo(dados.larguraT / 2 + dados.espessuraT / 2, dados.alturaT);
                    ctx.lineTo(-dados.larguraT / 2 - dados.espessuraT / 2, dados.alturaT);
                    ctx.lineTo(-dados.larguraT / 2 - dados.espessuraT / 2, dados.espessuraT);
                    ctx.lineTo(0, dados.espessuraT);
                    ctx.closePath();
                    ctx.stroke();
                    break;
                case 'ct':
                    // Desenho Perfil Circular
                    ctx.beginPath();
                    ctx.arc(perfilCanvas.width / 2, perfilCanvas.height / 2, dados.diametro / 2, 0, 2 * Math.PI);
                    ctx.stroke();
                    break;
                case 'qt':
                    // Desenho Perfil Quadrado
                    ctx.beginPath();
                    ctx.rect(0, 0, dados.lado, dados.lado);
                    ctx.stroke();
                    break;
            }
        }

        perfilForm.addEventListener('submit', function (e) {
            e.preventDefault();
            const tipo = document.getElementById('perfilType').value;
            const inputs = Array.from(document.querySelectorAll('input[type="number"]'));
            const dados = inputs.reduce((acc, input) => {
                acc[input.name] = parseFloat(input.value) || 0;
                return acc;
            }, {});

            if (!tipo || !dados) {
                errorMessage.textContent = 'Por favor, preencha todos os campos.';
                return;
            }

            let area, momentoInercia, peso;

            switch(tipo) {
                case 'i':
                    area = (dados.largura * dados.altura) - ((dados.largura - 2 * dados.espessuraFlange) * (dados.altura - dados.espessuraWeb));
                    momentoInercia = ((dados.largura * Math.pow(dados.altura, 3)) - ((dados.largura - 2 * dados.espessuraFlange) * Math.pow(dados.altura - dados.espessuraWeb, 3))) / 12;
                    break;
                case 'c':
                    area = (dados.largura * dados.altura) - ((dados.largura - dados.espessuraC) * (dados.altura - dados.espessuraC));
                    momentoInercia = ((dados.largura * Math.pow(dados.altura, 3)) - ((dados.largura - dados.espessuraC) * Math.pow(dados.altura - dados.espessuraC, 3))) / 12;
                    break;
                case 'l':
                    area = (dados.comprimentoL1 * dados.espessuraL) + (dados.comprimentoL2 * dados.espessuraL);
                    momentoInercia = (dados.comprimentoL1 * Math.pow(dados.espessuraL, 3)) / 12;
                    break;
                case 't':
                    area = (dados.larguraT * dados.espessuraT) + (dados.alturaT * dados.espessuraT);
                    momentoInercia = (dados.larguraT * Math.pow(dados.alturaT, 3)) / 12;
                    break;
                case 'ct':
                    area = Math.PI * Math.pow(dados.diametro / 2, 2) - Math.PI * Math.pow((dados.diametro / 2 - dados.espessuraCT), 2);
                    momentoInercia = (Math.PI / 64) * (Math.pow(dados.diametro, 4) - Math.pow(dados.diametro - 2 * dados.espessuraCT, 4));
                    break;
                case 'qt':
                    area = Math.pow(dados.lado, 2) - Math.pow(dados.lado - 2 * dados.espessuraQT, 2);
                    momentoInercia = (Math.pow(dados.lado, 4) - Math.pow(dados.lado - 2 * dados.espessuraQT, 4)) / 12;
                    break;
            }

            peso = area * densidadeAco * (dados.comprimento || 1); // Peso em kg

            resultados.textContent = `
                Área: ${area.toFixed(2)} mm²
                Momento de Inércia: ${momentoInercia.toFixed(2)} mm⁴
                Peso: ${peso.toFixed(2)} kg
            `;

            desenharPerfil(tipo, dados);
        });
    </script>
</body>
</html>
