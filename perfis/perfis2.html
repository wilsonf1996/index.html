<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Perfis de Aço - Gerdau</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f4f4f4;
        }
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 20px auto;
            background: #fff;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            color: #333;
        }
        form {
            margin-bottom: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
        }
        .form-group input {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
        }
        .form-group input[type="number"] {
            width: calc(100% - 20px);
        }
        .form-group button {
            padding: 10px 20px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .form-group button:hover {
            background-color: #0056b3;
        }
        #perfilCanvas {
            border: 1px solid #ddd;
            background-color: #fff;
            width: 100%;
            height: 400px;
        }
        #resultados {
            margin-top: 20px;
            white-space: pre-wrap;
            background-color: #f1f1f1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        #errorMessage {
            color: red;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Calculadora de Perfis de Aço - Gerdau</h1>
        <form id="perfilForm">
            <div class="form-group">
                <label for="perfilType">Tipo de Perfil</label>
                <select id="perfilType" name="perfilType" required>
                    <option value="">Selecione</option>
                    <option value="i">Perfil I</option>
                    <option value="h">Perfil H</option>
                    <option value="u">Perfil U</option>
                    <option value="c">Perfil C</option>
                    <option value="l">Perfil L</option>
                    <option value="t">Perfil T</option>
                    <option value="ct">Perfil Circular</option>
                    <option value="qt">Perfil Quadrado</option>
                </select>
            </div>
            <div id="inputFields">
                <!-- Campos dinâmicos serão inseridos aqui -->
            </div>
            <div class="form-group">
                <button type="submit">Calcular</button>
            </div>
        </form>
        <canvas id="perfilCanvas"></canvas>
        <div id="resultados"></div>
        <div id="errorMessage"></div>
    </div>

    <script>
        const perfilForm = document.getElementById('perfilForm');
        const perfilCanvas = document.getElementById('perfilCanvas');
        const resultados = document.getElementById('resultados');
        const errorMessage = document.getElementById('errorMessage');

        // Dados do aço A36
        const densidadeAco = 7850; // kg/m³

        function gerarCamposEntrada(tipo) {
            const inputFields = document.getElementById('inputFields');
            inputFields.innerHTML = '';

            const camposComuns = `
                <div class="form-group">
                    <label for="comprimento">Comprimento (m)</label>
                    <input type="number" id="comprimento" step="any" min="0" required>
                </div>
            `;

            const camposEspecificos = {
                i: `
                    <div class="form-group">
                        <label for="altura">Altura (mm)</label>
                        <input type="number" id="altura" step="any" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="largura">Largura (mm)</label>
                        <input type="number" id="largura" step="any" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="espessuraWeb">Espessura da Web (mm)</label>
                        <input type="number" id="espessuraWeb" step="any" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="espessuraFlange">Espessura da Flange (mm)</label>
                        <input type="number" id="espessuraFlange" step="any" min="0" required>
                    </div>
                `,
                c: `
                    <div class="form-group">
                        <label for="alturaC">Altura (mm)</label>
                        <input type="number" id="alturaC" step="any" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="larguraC">Largura (mm)</label>
                        <input type="number" id="larguraC" step="any" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="espessuraFlangeC">Espessura da Flange (mm)</label>
                        <input type="number" id="espessuraFlangeC" step="any" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="espessuraWebC">Espessura da Web (mm)</label>
                        <input type="number" id="espessuraWebC" step="any" min="0" required>
                    </div>
                `,
                l: `
                    <div class="form-group">
                        <label for="comprimento1">Comprimento 1 (mm)</label>
                        <input type="number" id="comprimento1" step="any" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="comprimento2">Comprimento 2 (mm)</label>
                        <input type="number" id="comprimento2" step="any" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="espessuraL">Espessura (mm)</label>
                        <input type="number" id="espessuraL" step="any" min="0" required>
                    </div>
                `,
                t: `
                    <div class="form-group">
                        <label for="alturaT">Altura (mm)</label>
                        <input type="number" id="alturaT" step="any" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="larguraT">Largura (mm)</label>
                        <input type="number" id="larguraT" step="any" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="espessuraT">Espessura (mm)</label>
                        <input type="number" id="espessuraT" step="any" min="0" required>
                    </div>
                `,
                ct: `
                    <div class="form-group">
                        <label for="diametro">Diâmetro (mm)</label>
                        <input type="number" id="diametro" step="any" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="espessuraCT">Espessura (mm)</label>
                        <input type="number" id="espessuraCT" step="any" min="0" required>
                    </div>
                `,
                qt: `
                    <div class="form-group">
                        <label for="lado">Lado (mm)</label>
                        <input type="number" id="lado" step="any" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="espessuraQT">Espessura (mm)</label>
                        <input type="number" id="espessuraQT" step="any" min="0" required>
                    </div>
                `
            };

            inputFields.innerHTML = camposComuns + (camposEspecificos[tipo] || '');
        }

        function validarEntradas(data, tipo) {
            const camposObrigatorios = {
                i: ['altura', 'largura', 'espessuraWeb', 'espessuraFlange'],
                c: ['alturaC', 'larguraC', 'espessuraWebC', 'espessuraFlangeC'],
                l: ['comprimento1', 'comprimento2', 'espessuraL'],
                t: ['alturaT', 'larguraT', 'espessuraT'],
                ct: ['diametro', 'espessuraCT'],
                qt: ['lado', 'espessuraQT']
            };

            const campos = camposObrigatorios[tipo] || [];
            let valido = true;
            let mensagem = '';

            campos.forEach(campo => {
                if (!data[campo] || isNaN(data[campo])) {
                    mensagem += `Campo "${campo}" é obrigatório e deve ser um número.\n`;
                    valido = false;
                }
            });

            if (!valido) {
                errorMessage.textContent = mensagem;
            } else {
                errorMessage.textContent = '';
            }

            return valido;
        }

        function desenharPerfil(tipo, dados) {
            const ctx = perfilCanvas.getContext('2d');
            ctx.clearRect(0, 0, perfilCanvas.width, perfilCanvas.height);

            ctx.strokeStyle = '#000';
            ctx.lineWidth = 2;

            switch (tipo) {
                case 'i':
                    ctx.beginPath();
                    ctx.moveTo(50, 50);
                    ctx.lineTo(50 + dados.largura, 50);
                    ctx.lineTo(50 + dados.largura, 50 + dados.altura);
                    ctx.lineTo(50, 50 + dados.altura);
                    ctx.closePath();
                    ctx.stroke();

                    ctx.beginPath();
                    ctx.moveTo(50 + dados.espessuraWeb, 50);
                    ctx.lineTo(50 + dados.largura - dados.espessuraWeb, 50);
                    ctx.lineTo(50 + dados.largura - dados.espessuraWeb, 50 + dados.altura - dados.espessuraFlange);
                    ctx.lineTo(50 + dados.espessuraWeb, 50 + dados.altura - dados.espessuraFlange);
                    ctx.closePath();
                    ctx.stroke();
                    break;

                case 'c':
                    ctx.beginPath();
                    ctx.rect(50, 50, dados.larguraC, dados.alturaC);
                    ctx.stroke();
                    break;

                case 'l':
                    ctx.beginPath();
                    ctx.moveTo(50, 50);
                    ctx.lineTo(50 + dados.comprimento1, 50);
                    ctx.lineTo(50 + dados.comprimento1, 50 + dados.espessuraL);
                    ctx.lineTo(50, 50 + dados.espessuraL);
                    ctx.closePath();
                    ctx.stroke();
                    break;

                case 't':
                    ctx.beginPath();
                    ctx.moveTo(50, 50);
                    ctx.lineTo(50 + dados.larguraT, 50);
                    ctx.lineTo(50 + dados.larguraT, 50 + dados.alturaT);
                    ctx.lineTo(50, 50 + dados.alturaT);
                    ctx.closePath();
                    ctx.stroke();
                    break;

                case 'ct':
                    ctx.beginPath();
                    ctx.arc(50 + dados.diametro / 2, 50 + dados.diametro / 2, dados.diametro / 2, 0, Math.PI * 2);
                    ctx.stroke();
                    break;

                case 'qt':
                    ctx.beginPath();
                    ctx.rect(50, 50, dados.lado, dados.lado);
                    ctx.stroke();
                    break;

                default:
                    errorMessage.textContent = 'Tipo de perfil não suportado.';
            }
        }

        function calcularPropriedades(tipo, dados) {
            let propriedades = '';
            let peso = 0;
            switch (tipo) {
                case 'i':
                    const areaI = dados.largura * dados.altura - 2 * (dados.largura - 2 * dados.espessuraWeb) * (dados.altura - 2 * dados.espessuraFlange);
                    const momentoInerciaI = (dados.largura * Math.pow(dados.altura, 3) / 12) - ((dados.largura - 2 * dados.espessuraWeb) * Math.pow(dados.altura - 2 * dados.espessuraFlange, 3) / 12);
                    const volumeI = areaI * dados.comprimento / 1000; // Convert mm²*m para m³
                    peso = volumeI * densidadeAco;
                    propriedades = `Área: ${areaI.toFixed(2)} mm²\nMomento de Inércia: ${momentoInerciaI.toFixed(2)} mm⁴`;
                    break;
                case 'c':
                    const areaC = dados.larguraC * dados.alturaC;
                    const momentoInerciaC = (dados.larguraC * Math.pow(dados.alturaC, 3)) / 12;
                    const volumeC = areaC * dados.comprimento / 1000; // Convert mm²*m para m³
                    peso = volumeC * densidadeAco;
                    propriedades = `Área: ${areaC.toFixed(2)} mm²\nMomento de Inércia: ${momentoInerciaC.toFixed(2)} mm⁴`;
                    break;
                case 'l':
                    const areaL = dados.comprimento1 * dados.espessuraL;
                    const momentoInerciaL = (dados.comprimento1 * Math.pow(dados.espessuraL, 3)) / 12;
                    const volumeL = areaL * dados.comprimento / 1000; // Convert mm²*m para m³
                    peso = volumeL * densidadeAco;
                    propriedades = `Área: ${areaL.toFixed(2)} mm²\nMomento de Inércia: ${momentoInerciaL.toFixed(2)} mm⁴`;
                    break;
                case 't':
                    const areaT = dados.larguraT * dados.alturaT;
                    const momentoInerciaT = (dados.larguraT * Math.pow(dados.alturaT, 3)) / 12;
                    const volumeT = areaT * dados.comprimento / 1000; // Convert mm²*m para m³
                    peso = volumeT * densidadeAco;
                    propriedades = `Área: ${areaT.toFixed(2)} mm²\nMomento de Inércia: ${momentoInerciaT.toFixed(2)} mm⁴`;
                    break;
                case 'ct':
                    const areaCT = Math.PI * Math.pow(dados.diametro / 2, 2);
                    const momentoInerciaCT = (Math.PI * Math.pow(dados.diametro, 4)) / 64;
                    const volumeCT = areaCT * dados.comprimento / 1000; // Convert mm²*m para m³
                    peso = volumeCT * densidadeAco;
                    propriedades = `Área: ${areaCT.toFixed(2)} mm²\nMomento de Inércia: ${momentoInerciaCT.toFixed(2)} mm⁴`;
                    break;
                case 'qt':
                    const areaQT = Math.pow(dados.lado, 2);
                    const momentoInerciaQT = (Math.pow(dados.lado, 4)) / 12;
                    const volumeQT = areaQT * dados.comprimento / 1000; // Convert mm²*m para m³
                    peso = volumeQT * densidadeAco;
                    propriedades = `Área: ${areaQT.toFixed(2)} mm²\nMomento de Inércia: ${momentoInerciaQT.toFixed(2)} mm⁴`;
                    break;
                default:
                    propriedades = 'Tipo de perfil não suportado.';
            }
            return `${propriedades}\nPeso: ${peso.toFixed(2)} kg`;
        }

        perfilForm.addEventListener('submit', function(e) {
            e.preventDefault();

            const tipo = document.getElementById('perfilType').value;
            const data = {};

            const campos = document.querySelectorAll('#inputFields input');
            campos.forEach(campo => {
                data[campo.id] = parseFloat(campo.value);
            });

            if (validarEntradas(data, tipo)) {
                resultados.textContent = `Cálculo para perfil tipo ${tipo}:\n` +
                    calcularPropriedades(tipo, data);
                
                desenharPerfil(tipo, data);
            }
        });

        document.getElementById('perfilType').addEventListener('change', function() {
            gerarCamposEntrada(this.value);
        });
    </script>
</body>
</html>
