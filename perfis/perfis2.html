<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Perfis Estruturais</title>
    <style>
        body { font-family: Arial, sans-serif; }
        .container { max-width: 800px; margin: 0 auto; }
        form { margin-bottom: 20px; }
        label { display: block; margin: 10px 0 5px; }
        input { width: calc(100% - 22px); padding: 10px; margin-bottom: 10px; }
        button { padding: 10px 15px; font-size: 16px; }
        canvas { border: 1px solid #000; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Calculadora de Perfis Estruturais</h1>

        <form id="perfilForm">
            <label for="perfilType">Tipo de Perfil:</label>
            <select id="perfilType" name="perfilType" required>
                <option value="i">Perfil I</option>
                <option value="h">Perfil H</option>
                <option value="u">Perfil U</option>
                <option value="c">Perfil C</option>
                <option value="l">Perfil L</option>
                <option value="t">Perfil T</option>
                <option value="ct">Tubular Circular</option>
                <option value="qt">Tubular Quadrado</option>
            </select>

            <div id="inputFields">
                <!-- Campos de entrada dinamicamente gerados -->
            </div>

            <button type="submit">Calcular</button>
        </form>

        <canvas id="perfilCanvas" width="600" height="400"></canvas>
    </div>

    <script>
        const perfilForm = document.getElementById('perfilForm');
        const inputFields = document.getElementById('inputFields');
        const perfilCanvas = document.getElementById('perfilCanvas');
        const ctx = perfilCanvas.getContext('2d');

        function gerarCamposEntrada(tipo) {
            let campos = '';

            switch (tipo) {
                case 'i':
                case 'h':
                case 'u':
                    campos += `
                        <label for="height">Altura (h):</label>
                        <input type="number" id="height" name="height" step="any" required>
                        <label for="width">Largura da aba (b):</label>
                        <input type="number" id="width" name="width" step="any" required>
                        <label for="thicknessFlange">Espessura da aba (t):</label>
                        <input type="number" id="thicknessFlange" name="thicknessFlange" step="any" required>
                        <label for="thicknessWeb">Espessura da alma (s):</label>
                        <input type="number" id="thicknessWeb" name="thicknessWeb" step="any" required>
                    `;
                    break;
                case 'c':
                    campos += `
                        <label for="heightC">Altura (h):</label>
                        <input type="number" id="heightC" name="heightC" step="any" required>
                        <label for="widthC">Largura da aba (b):</label>
                        <input type="number" id="widthC" name="widthC" step="any" required>
                        <label for="thicknessFlangeC">Espessura da aba (t):</label>
                        <input type="number" id="thicknessFlangeC" name="thicknessFlangeC" step="any" required>
                        <label for="thicknessWebC">Espessura da alma (s):</label>
                        <input type="number" id="thicknessWebC" name="thicknessWebC" step="any" required>
                    `;
                    break;
                case 'l':
                    campos += `
                        <label for="length1">Comprimento do lado 1 (a1):</label>
                        <input type="number" id="length1" name="length1" step="any" required>
                        <label for="length2">Comprimento do lado 2 (a2):</label>
                        <input type="number" id="length2" name="length2" step="any" required>
                        <label for="thicknessL">Espessura (t):</label>
                        <input type="number" id="thicknessL" name="thicknessL" step="any" required>
                    `;
                    break;
                case 't':
                    campos += `
                        <label for="heightT">Altura (h):</label>
                        <input type="number" id="heightT" name="heightT" step="any" required>
                        <label for="widthT">Largura da aba (b):</label>
                        <input type="number" id="widthT" name="widthT" step="any" required>
                        <label for="thicknessT">Espessura (t):</label>
                        <input type="number" id="thicknessT" name="thicknessT" step="any" required>
                    `;
                    break;
                case 'ct':
                    campos += `
                        <label for="diameter">Diâmetro Externo (d):</label>
                        <input type="number" id="diameter" name="diameter" step="any" required>
                        <label for="innerDiameter">Diâmetro Interno (d_i):</label>
                        <input type="number" id="innerDiameter" name="innerDiameter" step="any">
                    `;
                    break;
                case 'qt':
                    campos += `
                        <label for="side">Lado Externo (d):</label>
                        <input type="number" id="side" name="side" step="any" required>
                        <label for="innerSide">Lado Interno (d_i):</label>
                        <input type="number" id="innerSide" name="innerSide" step="any">
                    `;
                    break;
            }

            inputFields.innerHTML = campos;
        }

        function calcularPerfil(tipo, data) {
            switch (tipo) {
                case 'i':
                case 'h':
                case 'u':
                    return calcularPerfilI(data.height, data.width, data.thicknessFlange, data.thicknessWeb);
                case 'c':
                    return calcularPerfilC(data.heightC, data.widthC, data.thicknessFlangeC, data.thicknessWebC);
                case 'l':
                    return calcularPerfilL(data.length1, data.length2, data.thicknessL);
                case 't':
                    return calcularPerfilT(data.heightT, data.widthT, data.thicknessT);
                case 'ct':
                    return calcularPerfilCircular(data.diameter, data.innerDiameter);
                case 'qt':
                    return calcularPerfilQuadrado(data.side, data.innerSide);
            }
        }

        function desenharPerfil(tipo, data) {
            ctx.clearRect(0, 0, perfilCanvas.width, perfilCanvas.height);
            ctx.beginPath();
            switch (tipo) {
                case 'i':
                case 'h':
                case 'u':
                    desenharPerfilI(ctx, data.height, data.width, data.thicknessFlange, data.thicknessWeb);
                    break;
                case 'c':
                    desenharPerfilC(ctx, data.heightC, data.widthC, data.thicknessFlangeC, data.thicknessWebC);
                    break;
                case 'l':
                    desenharPerfilL(ctx, data.length1, data.length2, data.thicknessL);
                    break;
                case 't':
                    desenharPerfilT(ctx, data.heightT, data.widthT, data.thicknessT);
                    break;
                case 'ct':
                    desenharPerfilCircular(ctx, data.diameter, data.innerDiameter);
                    break;
                case 'qt':
                    desenharPerfilQuadrado(ctx, data.side, data.innerSide);
                    break;
            }
            ctx.stroke();
        }

        perfilForm.addEventListener('change', function(event) {
            gerarCamposEntrada(event.target.value);
        });

        perfilForm.addEventListener('submit', function(event) {
            event.preventDefault();
            const tipo = document.getElementById('perfilType').value;
            const data = {
                height: parseFloat(document.getElementById('height')?.value || 0),
                width: parseFloat(document.getElementById('width')?.value || 0),
                thicknessFlange: parseFloat(document.getElementById('thicknessFlange')?.value || 0),
                thicknessWeb: parseFloat(document.getElementById('thicknessWeb')?.value || 0),
                heightC: parseFloat(document.getElementById('heightC')?.value || 0),
                widthC: parseFloat(document.getElementById('widthC')?.value || 0),
                thicknessFlangeC: parseFloat(document.getElementById('thicknessFlangeC')?.value || 0),
                thicknessWebC: parseFloat(document.getElementById('thicknessWebC')?.value || 0),
                length1: parseFloat(document.getElementById('length1')?.value || 0),
                length2: parseFloat(document.getElementById('length2')?.value || 0),
                thicknessL: parseFloat(document.getElementById('thicknessL')?.value || 0),
                heightT: parseFloat(document.getElementById('heightT')?.value || 0),
                widthT: parseFloat(document.getElementById('widthT')?.value || 0),
                thicknessT: parseFloat(document.getElementById('thicknessT')?.value || 0),
                diameter: parseFloat(document.getElementById('diameter')?.value || 0),
                innerDiameter: parseFloat(document.getElementById('innerDiameter')?.value || 0),
                side: parseFloat(document.getElementById('side')?.value || 0),
                innerSide: parseFloat(document.getElementById('innerSide')?.value || 0)
            };

            const resultados = calcularPerfil(tipo, data);
            console.log(resultados);
            desenharPerfil(tipo, data);
        });

        function calcularPerfilI(height, width, thicknessFlange, thicknessWeb) {
            const area = (width * thicknessFlange) + ((height - 2 * thicknessFlange) * thicknessWeb);
            const perimeter = 2 * width + 2 * height - 2 * thicknessFlange;
            return { area, perimeter };
        }

        function desenharPerfilI(ctx, height, width, thicknessFlange, thicknessWeb) {
            ctx.beginPath();
            ctx.moveTo(50, 50);
            ctx.lineTo(50 + width, 50);
            ctx.lineTo(50 + width, 50 + height);
            ctx.lineTo(50, 50 + height);
            ctx.closePath();
            ctx.moveTo(50, 50);
            ctx.lineTo(50 + width, 50);
            ctx.lineTo(50 + width, 50 + thicknessFlange);
            ctx.lineTo(50, 50 + thicknessFlange);
            ctx.closePath();
            ctx.moveTo(50, 50 + height - thicknessFlange);
            ctx.lineTo(50 + width, 50 + height - thicknessFlange);
            ctx.lineTo(50 + width, 50 + height);
            ctx.lineTo(50, 50 + height);
            ctx.closePath();
            ctx.stroke();
        }

        function calcularPerfilC(height, width, thicknessFlange, thicknessWeb) {
            const area = (2 * width * thicknessFlange) + (height - 2 * thicknessFlange) * thicknessWeb;
            const perimeter = 2 * width + 2 * height - 4 * thicknessFlange;
            return { area, perimeter };
        }

        function desenharPerfilC(ctx, height, width, thicknessFlange, thicknessWeb) {
            ctx.beginPath();
            ctx.moveTo(50, 50);
            ctx.lineTo(50 + width, 50);
            ctx.lineTo(50 + width, 50 + thicknessFlange);
            ctx.lineTo(50 + thicknessWeb, 50 + thicknessFlange);
            ctx.lineTo(50 + thicknessWeb, 50 + height - thicknessFlange);
            ctx.lineTo(50 + width - thicknessWeb, 50 + height - thicknessFlange);
            ctx.lineTo(50 + width - thicknessWeb, 50 + thicknessFlange);
            ctx.lineTo(50 + width, 50 + thicknessFlange);
            ctx.lineTo(50 + width, 50 + height);
            ctx.lineTo(50, 50 + height);
            ctx.closePath();
            ctx.stroke();
        }

        function calcularPerfilL(length1, length2, thicknessL) {
            const area = (length1 + length2) * thicknessL;
            const perimeter = 2 * (length1 + length2) + 2 * thicknessL;
            return { area, perimeter };
        }

        function desenharPerfilL(ctx, length1, length2, thicknessL) {
            ctx.beginPath();
            ctx.moveTo(50, 50);
            ctx.lineTo(50 + length1, 50);
            ctx.lineTo(50 + length1, 50 + thicknessL);
            ctx.lineTo(50 + thicknessL, 50 + thicknessL);
            ctx.lineTo(50 + thicknessL, 50 + length2);
            ctx.lineTo(50, 50 + length2);
            ctx.closePath();
            ctx.stroke();
        }

        function calcularPerfilT(height, width, thicknessT) {
            const area = (width * thicknessT) + (height - 2 * thicknessT) * thicknessT;
            const perimeter = 2 * width + 2 * height - 4 * thicknessT;
            return { area, perimeter };
        }

        function desenharPerfilT(ctx, height, width, thicknessT) {
            ctx.beginPath();
            ctx.moveTo(50, 50);
            ctx.lineTo(50 + width, 50);
            ctx.lineTo(50 + width, 50 + thicknessT);
            ctx.lineTo(50 + width / 2 + thicknessT, 50 + thicknessT);
            ctx.lineTo(50 + width / 2 + thicknessT, 50 + height - thicknessT);
            ctx.lineTo(50 + width / 2 - thicknessT, 50 + height - thicknessT);
            ctx.lineTo(50 + width / 2 - thicknessT, 50 + thicknessT);
            ctx.lineTo(50, 50 + thicknessT);
            ctx.closePath();
            ctx.stroke();
        }

        function calcularPerfilCircular(diameter, innerDiameter) {
            const area = Math.PI * ((diameter ** 2 - innerDiameter ** 2) / 4);
            const perimeter = Math.PI * (diameter + innerDiameter);
            return { area, perimeter };
        }

        function desenharPerfilCircular(ctx, diameter, innerDiameter) {
            ctx.beginPath();
            ctx.arc(50 + diameter / 2, 50 + diameter / 2, diameter / 2, 0, 2 * Math.PI);
            ctx.arc(50 + diameter / 2, 50 + diameter / 2, innerDiameter / 2, 0, 2 * Math.PI, true);
            ctx.closePath();
            ctx.stroke();
        }

        function calcularPerfilQuadrado(side, innerSide) {
            const area = (side ** 2 - innerSide ** 2);
            const perimeter = 4 * side + 4 * innerSide;
            return { area, perimeter };
        }

        function desenharPerfilQuadrado(ctx, side, innerSide) {
            ctx.beginPath();
            ctx.rect(50, 50, side, side);
            ctx.rect(50 + (side - innerSide) / 2, 50 + (side - innerSide) / 2, innerSide, innerSide);
            ctx.closePath();
            ctx.stroke();
        }

        gerarCamposEntrada(document.getElementById('perfilType').value);
    </script>
</body>
</html>
