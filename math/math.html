<<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Avançada de Limites</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            margin-bottom: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .form-group button {
            width: 100%;
            padding: 10px;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .form-group button:hover {
            background-color: #0056b3;
        }
        #result {
            margin-top: 20px;
        }
        .math-output {
            font-size: 1.2em;
            font-family: 'Times New Roman', serif;
        }
        .fraction {
            display: inline-block;
            vertical-align: middle;
        }
        .fraction .top, .fraction .bottom {
            display: block;
            text-align: center;
        }
        .fraction .top {
            border-bottom: 1px solid #000;
            padding: 0 5px;
        }
        .fraction .bottom {
            padding: 0 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Calculadora Avançada de Limites</h1>

        <!-- Número de Variáveis -->
        <div class="form-group">
            <label for="variables">Número de Variáveis:</label>
            <select id="variables" onchange="updateFields()">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
            </select>
        </div>

        <!-- Fração -->
        <div class="form-group">
            <label for="fraction">Tem Fração:</label>
            <select id="fraction" onchange="updateFields()">
                <option value="no">Não</option>
                <option value="yes">Sim</option>
            </select>
        </div>

        <!-- Campos Dinâmicos -->
        <div id="fields"></div>

        <!-- Ponto do Limite -->
        <div class="form-group">
            <label for="limitPoint">Ponto do Limite:</label>
            <input type="text" id="limitPoint" placeholder="Digite o ponto do limite">
        </div>

        <!-- Botão de Calcular -->
        <button onclick="calculateLimit()">Calcular Limite</button>

        <!-- Resultado -->
        <div id="result"></div>
    </div>

    <script>
        function updateFields() {
            const numVars = document.getElementById('variables').value;
            const isFraction = document.getElementById('fraction').value === 'yes';
            const fieldsContainer = document.getElementById('fields');
            fieldsContainer.innerHTML = '';  // Clear previous fields

            if (isFraction) {
                fieldsContainer.innerHTML += '<h2>Função no Numerador:</h2>';
                for (let i = 1; i <= numVars; i++) {
                    fieldsContainer.innerHTML += `
                        <div class="form-group">
                            <label for="coefNum${i}">Coeficiente para x${i} (Numerador):</label>
                            <input type="text" id="coefNum${i}" placeholder="Coeficiente para x${i}">
                            <label for="expNum${i}">Expoente para x${i} (Numerador):</label>
                            <input type="text" id="expNum${i}" placeholder="Expoente para x${i}">
                        </div>`;
                }

                fieldsContainer.innerHTML += '<h2>Função no Denominador:</h2>';
                for (let i = 1; i <= numVars; i++) {
                    fieldsContainer.innerHTML += `
                        <div class="form-group">
                            <label for="coefDen${i}">Coeficiente para x${i} (Denominador):</label>
                            <input type="text" id="coefDen${i}" placeholder="Coeficiente para x${i}">
                            <label for="expDen${i}">Expoente para x${i} (Denominador):</label>
                            <input type="text" id="expDen${i}" placeholder="Expoente para x${i}">
                        </div>`;
                }
            } else {
                for (let i = 1; i <= numVars; i++) {
                    fieldsContainer.innerHTML += `
                        <div class="form-group">
                            <label for="coef${i}">Coeficiente para x${i}:</label>
                            <input type="text" id="coef${i}" placeholder="Coeficiente para x${i}">
                            <label for="exp${i}">Expoente para x${i}:</label>
                            <input type="text" id="exp${i}" placeholder="Expoente para x${i}">
                        </div>`;
                }
            }
        }

        function calculateLimit() {
            const numVars = document.getElementById('variables').value;
            const isFraction = document.getElementById('fraction').value === 'yes';
            const limitPoint = parseFloat(document.getElementById('limitPoint').value);
            let result = '';

            // Prepare the functions
            let numerator = '';
            let denominator = '';

            if (isFraction) {
                numerator = buildFunction(numVars, 'Num');
                denominator = buildFunction(numVars, 'Den');
                result = `O limite de <div class="fraction"><span class="top">${numerator}</span><span class="bottom">${denominator}</span></div> no ponto ${limitPoint} é ${calculateFractionLimit(numerator, denominator, limitPoint)}`;
            } else {
                numerator = buildFunction(numVars);
                result = `O limite de ${numerator} no ponto ${limitPoint} é ${calculateLimit(numerator, limitPoint)}`;
            }

            document.getElementById('result').innerHTML = result;
        }

        function buildFunction(numVars, type = '') {
            let func = '';
            for (let i = 1; i <= numVars; i++) {
                const coef = document.getElementById(`coef${type}${i}`)?.value || 0;
                const exp = document.getElementById(`exp${type}${i}`)?.value || 1;
                func += `${coef}*x${i}<sup>${exp}</sup> + `;
            }
            return func.slice(0, -3);  // Remove last '+'
        }

        function calculateLimit(func, point) {
            // Simple parsing and evaluation - consider using a library for complex cases
            return eval(func.replace(/x/g, `(${point})`));
        }

        function calculateFractionLimit(numerator, denominator, point) {
            // Simple parsing and evaluation - consider using a library for complex cases
            const num = calculateLimit(numerator, point);
            const den = calculateLimit(denominator, point);
            return den !== 0 ? (num / den) : 'Indeterminado';
        }
    </script>
</body>
</html>
