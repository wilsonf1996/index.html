<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cálculo de Vigas de Concreto</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        form {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            margin: auto;
        }
        label {
            display: block;
            margin: 10px 0 5px;
        }
        input[type="number"], select {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #45a049;
        }
        #resultado, #estagioCarregamento {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>
    <h1>Cálculo de Vigas de Concreto</h1>
    <form id="calcForm">
        <label for="momentoFletor">Momento Fletor (kN.m):</label>
        <input type="number" id="momentoFletor" step="any" required><br>

        <label for="forca">Força Axial (kN):</label>
        <input type="number" id="forca" step="any" required><br>

        <label for="cargaTransversal">Carga Transversal (kN):</label>
        <input type="number" id="cargaTransversal" step="any" required><br>

        <label for="altura">Altura da Viga (mm):</label>
        <input type="number" id="altura" step="any" required><br>

        <label for="largura">Largura da Viga (mm):</label>
        <input type="number" id="largura" step="any" required><br>

        <label for="cobrimento">Cobrimento (mm):</label>
        <select id="cobrimento">
            <option value="20">20</option>
            <option value="25">25</option>
            <option value="30">30</option>
            <option value="35">35</option>
            <option value="40">40</option>
        </select><br>

        <label for="fck">Resistência do Concreto (Fck) (MPa):</label>
        <select id="fck">
            <option value="15">15</option>
            <option value="20">20</option>
            <option value="25">25</option>
            <option value="30">30</option>
            <option value="35">35</option>
            <option value="40">40</option>
            <option value="45">45</option>
            <option value="50">50</option>
        </select><br>

        <label for="tipoAco">Tensão de Escoamento do Aço (fy) (MPa):</label>
        <select id="tipoAco">
            <option value="500">500</option>
            <option value="600">600</option>
        </select><br>

        <label for="diametroAco">Diâmetro da Barra de Aço (mm):</label>
        <select id="diametroAco" onchange="atualizarAreaBitola()">
            <option value="10">10</option>
            <option value="12">12</option>
            <option value="16">16</option>
            <option value="20">20</option>
            <option value="25">25</option>
            <option value="32">32</option>
            <option value="40">40</option>
        </select><br>

        <label for="areaBitola">Área da Bitola (mm²):</label>
        <input type="text" id="areaBitola" readonly><br>

        <label for="comprimentoEfeito">Comprimento Efetivo para Flambagem (mm):</label>
        <input type="number" id="comprimentoEfeito" step="any" required><br>

        <label for="tipoEsforco">Tipo de Esforço:</label>
        <select id="tipoEsforco">
            <option value="flexaoSimples">Flexão Simples</option>
            <option value="flexaoComposta">Flexão Composta</option>
            <option value="cisalhamento">Cisalhamento</option>
            <option value="flambagem">Flambagem</option>
            <option value="combinado">Combinado</option>
        </select><br>

        <button type="button" onclick="calcular()">Calcular</button>
    </form>

    <div id="resultado"></div>
    <div id="estagioCarregamento"></div>

    <script>
        const areasBitola = {
        10: 78.5,
        12: 113.1,
        16: 201.1,
        20: 314.2,
        25: 490.9,
        32: 804.2,
        40: 1256.6
    };

    function atualizarAreaBitola() {
        const diametroAco = document.getElementById('diametroAco').value;
        document.getElementById('areaBitola').value = areasBitola[diametroAco];
    }
function calcular() {
    const momentoFletor = parseFloat(document.getElementById('momentoFletor').value) * 1e6; // kN.m para N.mm
    const forca = parseFloat(document.getElementById('forca').value) * 1e3; // kN para N
    const cargaTransversal = parseFloat(document.getElementById('cargaTransversal').value) * 1e3; // kN para N
    const altura = parseFloat(document.getElementById('altura').value); // mm
    const largura = parseFloat(document.getElementById('largura').value); // mm
    const cobrimento = parseFloat(document.getElementById('cobrimento').value); // mm
    const fck = parseFloat(document.getElementById('fck').value); // MPa
    const tipoAco = parseFloat(document.getElementById('tipoAco').value); // MPa
    const diametroAco = parseFloat(document.getElementById('diametroAco').value); // mm
    const comprimentoEfeito = parseFloat(document.getElementById('comprimentoEfeito').value); // mm
    const tipoEsforco = document.getElementById('tipoEsforco').value;
    const areaBitola = areasBitola[diametroAco] || 0; // Área de aço para o diâmetro dado

    const fyd = tipoAco; // Tensão de escoamento do aço em MPa
    const fcd = fck / 1.4; // Tensão de compressão do concreto em MPa (fcd = fck / γc)
    const d = altura - cobrimento; // mm

    let resultado = '';
    let estagioCarregamento = '';

    let momentoAtuante = momentoFletor;


    switch (tipoEsforco) {
        case 'flexaoSimples':
            const AsFlexaoSimples = momentoAtuante / (0.87 * fyd * (d - altura / 2));
            const numeroBarrasFlexaoSimples = Math.ceil(AsFlexaoSimples / areaBitola);

            const momentoResistenteFlexaoSimples = 0.87 * fyd * d * (altura - d / 2) * 1e-6; // kN.m
            resultado = `Área de Aço para Flexão Simples: ${AsFlexaoSimples.toFixed(2)} mm²<br>
                         Número de Barras: ${numeroBarrasFlexaoSimples}<br>
                         Momento Resistente: ${momentoResistenteFlexaoSimples.toFixed(2)} kN.m`;
            break;

        case 'flexaoComposta':
            const AsFlexaoComposta = momentoAtuante / (0.87 * fyd * (d - altura / 2));
            const numeroBarrasFlexaoComposta = Math.ceil(AsFlexaoComposta / areaBitola);

            const momentoResistenteFlexaoComposta = 0.87 * fyd * d * (altura - d / 2) * 1e-6; // kN.m
            resultado = `Área de Aço para Flexão Composta: ${AsFlexaoComposta.toFixed(2)} mm²<br>
                         Número de Barras: ${numeroBarrasFlexaoComposta}<br>
                         Momento Resistente: ${momentoResistenteFlexaoComposta.toFixed(2)} kN.m`;
            break;

        case 'cisalhamento':
            const Vrd = (0.6 * fcd * largura * altura) / 1e3; // kN
            const AsCisalhamento = (forca / Vrd) * areaBitola; // Área de aço para cisalhamento
            const numeroBarrasCisalhamento = Math.ceil(AsCisalhamento / areaBitola);
            resultado = `Resistência ao Cisalhamento: ${Vrd.toFixed(2)} kN<br>
                         Área de Aço para Cisalhamento: ${AsCisalhamento.toFixed(2)} mm²<br>
                         Número de Barras: ${numeroBarrasCisalhamento}`;
            break;

        case 'flambagem':
            const I = (largura * Math.pow(altura, 3)) / 12; // mm^4
            const Ae = Math.pow(comprimentoEfeito, 2) / I; // mm^2
            const Ncr = (Math.PI ** 2 * tipoAco * I) / Math.pow(comprimentoEfeito, 2); // N
            const AsFlambagem = (Ncr / (0.6 * fcd)) * areaBitola; // Área de aço para flambagem
            const numeroBarrasFlambagem = Math.ceil(AsFlambagem / areaBitola);
            resultado = `Capacidade de Carga Crítica por Flambagem: ${Ncr.toFixed(2)} N<br>
                         Área de Aço para Flambagem: ${AsFlambagem.toFixed(2)} mm²<br>
                         Número de Barras: ${numeroBarrasFlambagem}`;
            break;

        case 'combinado':
            const AsCombinado = momentoAtuante / (0.87 * fyd * (d - altura / 2));
            const numeroBarrasCombinado = Math.ceil(AsCombinado / areaBitola);

            const momentoResistenteCombinado = 0.87 * fyd * d * (altura - d / 2) * 1e-6; // kN.m
            resultado = `Área de Aço para Esforço Combinado: ${AsCombinado.toFixed(2)} mm²<br>
                         Número de Barras: ${numeroBarrasCombinado}<br>
                         Momento Resistente: ${momentoResistenteCombinado.toFixed(2)} kN.m`;
            break;
    }

    // Cálculo dos estádios de carregamento com base no momento atuante
   const M1 = 0.6 * fcd * largura * Math.pow(d, 2) / 1e6; // Estádio I: kN.m
const M2 = 0.8 * fcd * largura * Math.pow(d, 2) / 1e6; // Estádio II: kN.m
const M3 = 1.2 * fcd * largura * Math.pow(d, 2) / 1e6; // Estádio III: kN.m

// Determinação do estágio atual com base no momento atuante
let estagioAtual = '';
if (momentoAtuante <= M1) {
    estagioAtual = 'Estádio I: Fase Elástica';
} else if (momentoAtuante > M3) {
    estagioAtual = 'Estádio III: Ruptura do Aço e do Concreto';
} else {
    estagioAtual = 'Estádio II: Fase de Fissuração no Concreto';
}

// Geração do texto com os estágios e o estágio atual
const estagioCarregamento = `Estádio I: Fase Elástica - Momento Máximo: ${M1.toFixed(2)} kN.m<br>
                             Estádio II: Fase de Fissuração no Concreto - Momento Máximo: ${M2.toFixed(2)} kN.m<br>
                             Estádio III: Ruptura do Aço e do Concreto - Momento Máximo: ${M3.toFixed(2)} kN.m<br>
                             Estágio Atual: ${estagioAtual}`;

// Exiba ou utilize as variáveis estagioCarregamento conforme necessário
document.getElementById('resultado').innerHTML = `Momento Atuante: ${momentoAtuante.toFixed(2)} kN.m`;
document.getElementById('estagioCarregamento').innerHTML = estagioCarregamento;
}

    </script>
</body>
</html>
