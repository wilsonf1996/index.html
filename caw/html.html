<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Calculadora de Viga de Concreto Armado - Flex√£o e Cisalhamento</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: Arial, Helvetica, sans-serif;
    }

    body {
      margin: 0;
      padding: 0;
      background: #0f172a;
      color: #e5e7eb;
    }

    .container {
      max-width: 1100px;
      margin: 20px auto;
      padding: 20px;
      background: #020617;
      border-radius: 16px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.7);
      border: 1px solid #1f2937;
    }

    h1, h2, h3 {
      margin-top: 0;
      font-weight: 700;
    }

    h1 {
      text-align: center;
      margin-bottom: 16px;
      font-size: 26px;
    }

    .subtitle {
      text-align: center;
      font-size: 13px;
      color: #9ca3af;
      margin-bottom: 20px;
    }

    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }

    .card {
      background: #020617;
      border-radius: 12px;
      padding: 16px;
      border: 1px solid #111827;
    }

    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .card-header h2 {
      font-size: 18px;
      margin: 0;
    }

    label {
      display: block;
      font-size: 13px;
      margin-bottom: 4px;
      color: #e5e7eb;
    }

    input[type="number"] {
      width: 100%;
      padding: 6px 8px;
      border-radius: 8px;
      border: 1px solid #374151;
      background: #020617;
      color: #e5e7eb;
      font-size: 13px;
    }

    input[type="number"]:focus {
      outline: none;
      border-color: #22c55e;
      box-shadow: 0 0 0 1px #22c55e33;
    }

    .field {
      margin-bottom: 10px;
    }

    .units {
      font-size: 11px;
      color: #9ca3af;
    }

    .btn-row {
      display: flex;
      gap: 10px;
      margin-top: 10px;
      flex-wrap: wrap;
    }

    button {
      border-radius: 999px;
      border: none;
      padding: 8px 16px;
      font-size: 13px;
      cursor: pointer;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: transform 0.1s ease, box-shadow 0.1s ease, background 0.15s ease;
    }

    button.primary {
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: #022c22;
      box-shadow: 0 8px 16px rgba(34,197,94,0.3);
    }

    button.secondary {
      background: #111827;
      color: #e5e7eb;
      border: 1px solid #374151;
    }

    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 12px 24px rgba(0,0,0,0.4);
    }

    button:active {
      transform: translateY(0);
      box-shadow: none;
    }

    .results {
      margin-top: 16px;
      border-radius: 12px;
      background: #020617;
      border: 1px solid #111827;
      padding: 16px;
      font-size: 13px;
      line-height: 1.5;
      max-height: 420px;
      overflow-y: auto;
    }

    .results h3 {
      margin-top: 0;
      font-size: 16px;
    }

    .tag {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 11px;
      margin-left: 8px;
    }

    .tag-ok {
      background: rgba(22,163,74,0.12);
      color: #4ade80;
      border: 1px solid rgba(22,163,74,0.7);
    }

    .tag-warn {
      background: rgba(234,179,8,0.1);
      color: #facc15;
      border: 1px solid rgba(234,179,8,0.7);
    }

    .tag-err {
      background: rgba(239,68,68,0.1);
      color: #f87171;
      border: 1px solid rgba(239,68,68,0.7);
    }

    .flex-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .note {
      font-size: 11px;
      color: #9ca3af;
      margin-top: 12px;
    }

    .two-cols {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
    }

    .small {
      font-size: 12px;
    }

    @media (max-width: 900px) {
      .grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Calculadora de Viga de Concreto Armado</h1>
    <div class="subtitle">
      Flex√£o e cisalhamento ‚Äì modelo simplificado inspirado na NBR 6118.<br>
      <strong>Uso did√°tico / pr√©-dimensionamento. N√£o substitui projeto estrutural.</strong>
    </div>

    <div class="grid">

      <!-- Dados de Material e Geometria -->
      <div class="card">
        <div class="card-header">
          <h2>1. Materiais & Geometria</h2>
          <span class="small" style="color:#9ca3af;">Unidades padr√£o</span>
        </div>
        <div class="two-cols">
          <div class="field">
            <label>fck (MPa)</label>
            <input type="number" id="fck" value="30" step="1" />
          </div>
          <div class="field">
            <label>fyk (MPa) - a√ßo CA-50 ‚âà 500</label>
            <input type="number" id="fyk" value="500" step="10" />
          </div>
          <div class="field">
            <label>Largura da viga b (cm)</label>
            <input type="number" id="b" value="20" step="0.5" />
          </div>
          <div class="field">
            <label>Altura total h (cm)</label>
            <input type="number" id="h" value="50" step="0.5" />
          </div>
          <div class="field">
            <label>Cobrimento √∫til (cm)</label>
            <input type="number" id="cobertura" value="3" step="0.5" />
          </div>
          <div class="field">
            <label>√ò barras de flex√£o (mm)</label>
            <input type="number" id="phi_long" value="16" step="2" />
          </div>
        </div>

        <div class="note">
          A profundidade √∫til <em>d</em> √© calculada automaticamente: d = h ‚àí cobrimento ‚àí √ò/2.
        </div>
      </div>

      <!-- Esfor√ßos -->
      <div class="card">
        <div class="card-header">
          <h2>2. Esfor√ßos solicitantes</h2>
          <span class="small" style="color:#9ca3af;">Momento e cisalhamento de c√°lculo</span>
        </div>
        <div class="two-cols">
          <div class="field">
            <label>Msd (kN¬∑m) ‚Äì Momento fletor de c√°lculo</label>
            <input type="number" id="Msd" value="150" step="1" />
            <span class="units">Positivo para tra√ß√£o na fibra inferior</span>
          </div>
          <div class="field">
            <label>Vsd (kN) ‚Äì Esfor√ßo cortante de c√°lculo</label>
            <input type="number" id="Vsd" value="200" step="1" />
          </div>
          <div class="field">
            <label>√ò estribo (mm)</label>
            <input type="number" id="phi_stirrup" value="6.3" step="0.3" />
          </div>
          <div class="field">
            <label>N¬∫ de ramos por estribo (pernas ativas)</label>
            <input type="number" id="legs" value="2" step="1" />
            <span class="units">Ex.: estribo fechado comum = 2 pernas na alma.</span>
          </div>
        </div>
      </div>

    </div>

    <!-- Bot√µes -->
    <div class="btn-row" style="justify-content:center; margin-top:20px;">
      <button class="primary" onclick="calcular()">
        ‚öôÔ∏è Calcular flex√£o & cisalhamento
      </button>
      <button class="secondary" onclick="limparResultados()">
        üßπ Limpar resultados
      </button>
    </div>

    <!-- Resultados -->
    <div class="results" id="resultados">
      <h3>Resultados aparecer√£o aqui‚Ä¶</h3>
      <div class="note">
        Modelo simplificado: considera se√ß√£o retangular, armadura simples em flex√£o,
        z ‚âà 0,9¬∑d, Œ∏ ‚âà 45¬∞ em cisalhamento, sem verifica√ß√£o exaustiva de todos os
        limites normativos (dom√≠nios, VRd2, VRdc, etc.).
      </div>
    </div>

  </div>

  <script>
    function format(n, dec = 2) {
      if (isNaN(n) || !isFinite(n)) return "-";
      return n.toLocaleString("pt-BR", {
        minimumFractionDigits: dec,
        maximumFractionDigits: dec
      });
    }

    function limparResultados() {
      document.getElementById("resultados").innerHTML = `
        <h3>Resultados aparecer√£o aqui‚Ä¶</h3>
        <div class="note">
          Preencha os dados da viga, materiais e esfor√ßos, depois clique em
          <strong>‚ÄúCalcular flex√£o & cisalhamento‚Äù</strong>.
        </div>
      `;
    }

    function calcular() {
      // Entrada de dados
      const fck = parseFloat(document.getElementById("fck").value);       // MPa
      const fyk = parseFloat(document.getElementById("fyk").value);       // MPa
      const b_cm = parseFloat(document.getElementById("b").value);        // cm
      const h_cm = parseFloat(document.getElementById("h").value);        // cm
      const cob_cm = parseFloat(document.getElementById("cobertura").value); // cm
      const phi_long = parseFloat(document.getElementById("phi_long").value); // mm

      const Msd_kNm = parseFloat(document.getElementById("Msd").value);   // kN.m
      const Vsd_kN  = parseFloat(document.getElementById("Vsd").value);   // kN

      const phi_st  = parseFloat(document.getElementById("phi_stirrup").value); // mm
      const legs    = parseInt(document.getElementById("legs").value, 10);

      const resDiv = document.getElementById("resultados");

      if ([fck, fyk, b_cm, h_cm, cob_cm, phi_long, Msd_kNm, Vsd_kN, phi_st, legs]
          .some(v => isNaN(v) || v <= 0)) {
        resDiv.innerHTML = `
          <h3>Erro de entrada</h3>
          <p>Verifique se todos os campos est√£o preenchidos com valores num√©ricos positivos.</p>
        `;
        return;
      }

      // Convers√µes e par√¢metros de c√°lculo
      const b_mm = b_cm * 10.0;
      const h_mm = h_cm * 10.0;
      const cob_mm = cob_cm * 10.0;

      // Profundidade √∫til
      const d_mm = h_mm - cob_mm - phi_long / 2.0;
      const d_m  = d_mm / 1000.0;

      // Par√°metros de materiais (simplificado NBR 6118)
      const gamma_c = 1.4;
      const gamma_s = 1.15;
      const alpha_cc = 0.85;

      const fcd = alpha_cc * fck / gamma_c; // MPa
      const fyd = fyk / gamma_s;           // MPa

      // Momento em N¬∑mm
      const Msd_Nmm = Msd_kNm * 1e6; 

      // --------------------------------------
      // FLEX√ÉO ‚Äì armadura de tra√ß√£o As
      // F√≥rmula simplificada: Mrd = As * fyd * z com z ‚âà 0,9d
      // --------------------------------------
      const z_mm = 0.9 * d_mm;
      const As_req_mm2 = Msd_Nmm / (fyd * z_mm); // mm¬≤

      // Taxa de armadura œÅ = As / (b * d)
      const rho = As_req_mm2 / (b_mm * d_mm); // adimensional

      // Estimativa fctm ~= 0,3 * fck^(2/3) [MPa]
      const fctm = 0.3 * Math.pow(fck, 2.0 / 3.0);
      // œÅmin ~ 0,15 * fctm / fyk  (express√£o simplificada)
      const rho_min = 0.15 * fctm / fyk;
      const As_min_mm2 = rho_min * b_mm * d_mm;

      const As_adot_mm2 = Math.max(As_req_mm2, As_min_mm2);

      // --------------------------------------
      // CISALHAMENTO ‚Äì estribos (modelo simplificado)
      // Asw/s = Vsd / (z * fyd * cotŒ∏) , com Œ∏ ‚âà 45¬∞ ‚Üí cotŒ∏ = 1
      // --------------------------------------
      const z_m = z_mm / 1000.0;
      const Vsd_N = Vsd_kN * 1e3;

      const Asw_s_req = Vsd_N / (z_m * 1e3 * fyd); 
      // Explica√ß√£o: z[m] * 1e3 ‚Üí z[mm]; fyd[MPa] = N/mm¬≤ ‚Üí N/(mm¬≤);
      // ent√£o Vsd[N] / (z[mm] * fyd[N/mm¬≤]) = mm¬≤/mm

      // √Årea de a√ßo por estribo (considerando n¬∫ de pernas ativas)
      const Asw_stirrup_mm2 = legs * (Math.PI * Math.pow(phi_st, 2) / 4.0);

      // Espa√ßamento s (mm)
      const s_mm = Asw_stirrup_mm2 / Asw_s_req;

      // Limites de espa√ßamento usuais (simplificados):
      const s_max1_mm = 0.75 * d_mm;        // ~0,75¬∑d
      const s_max2_mm = 300.0;             // 30 cm
      const s_max_mm = Math.min(s_max1_mm, s_max2_mm);

      const s_adot_mm = Math.min(s_mm, s_max_mm);

      const rho_w = Asw_stirrup_mm2 / (s_adot_mm * b_mm);

      // Checagem qualitativa de mensagens
      let flex_tag = `<span class="tag tag-ok">OK (As ‚â• As,min)</span>`;
      if (As_req_mm2 > As_adot_mm2 * 1.001) {
        flex_tag = `<span class="tag tag-err">Erro na l√≥gica As</span>`;
      } else if (As_req_mm2 < As_min_mm2 * 0.999) {
        flex_tag = `<span class="tag tag-warn">Flex. domina, mas As limitada por min.</span>`;
      }

      let shear_tag;
      if (s_mm <= s_max_mm) {
        shear_tag = `<span class="tag tag-ok">OK (espa√ßamento ‚â§ s<sub>m√°x</sub>)</span>`;
      } else {
        shear_tag = `<span class="tag tag-warn">Ajustado para s<sub>m√°x</sub> ‚Äì verifique VRd,2/VRd,c</span>`;
      }

      // Monta sa√≠da
      resDiv.innerHTML = `
        <h3>Resultados do dimensionamento</h3>

        <p><strong>Dados utilizados:</strong></p>
        <ul>
          <li>fck = <strong>${format(fck,0)}</strong> MPa, fyk = <strong>${format(fyk,0)}</strong> MPa</li>
          <li>b = <strong>${format(b_cm)}</strong> cm, h = <strong>${format(h_cm)}</strong> cm</li>
          <li>Cobrimento = <strong>${format(cob_cm)}</strong> cm, √ò barras de flex√£o = <strong>${format(phi_long)}</strong> mm</li>
          <li>Msd = <strong>${format(Msd_kNm)}</strong> kN¬∑m, Vsd = <strong>${format(Vsd_kN)}</strong> kN</li>
        </ul>

        <hr style="border-color:#111827;">

        <p><strong>Geometria √∫til:</strong></p>
        <ul>
          <li>d = <strong>${format(d_mm/10)}</strong> cm (=${format(d_mm)} mm)</li>
          <li>z ‚âà 0,9¬∑d = <strong>${format(z_mm/10)}</strong> cm (=${format(z_mm)} mm)</li>
          <li>fcd = <strong>${format(fcd,2)}</strong> MPa, fyd = <strong>${format(fyd,2)}</strong> MPa</li>
        </ul>

        <h4>1) Flex√£o simples (armadura de tra√ß√£o)</h4>
        ${flex_tag}
        <ul>
          <li>As,req (somente por momento) = <strong>${format(As_req_mm2)}</strong> mm¬≤</li>
          <li>As,min (simplificado) = <strong>${format(As_min_mm2)}</strong> mm¬≤</li>
          <li>As adotada = <strong>${format(As_adot_mm2)}</strong> mm¬≤</li>
          <li>Taxa de armadura œÅ = As/(b¬∑d) = <strong>${format(rho * 1000,3)}</strong> ‚Ä∞</li>
        </ul>
        <p class="note">
          Coment√°rio: As adotada √© o maior valor entre As,req e As,min. Em projeto real,
          deve-se escolher di√¢metros e n√∫mero de barras comerciais e checar dom√≠nios de deforma√ß√£o
          (NBR 6118 ‚Äì estados-limite √∫ltimos).
        </p>

        <h4>2) Cisalhamento (estribos)</h4>
        ${shear_tag}
        <ul>
          <li>Asw/s requerida = <strong>${format(Asw_s_req,3)}</strong> mm¬≤/mm</li>
          <li>√Årea por estribo (Asw) = <strong>${format(Asw_stirrup_mm2,2)}</strong> mm¬≤
              (√ò${format(phi_st)} mm, ${legs} pernas)</li>
          <li>Espa√ßamento calculado s = <strong>${format(s_mm/10)}</strong> cm
              (=${format(s_mm)} mm)</li>
          <li>Espa√ßamento m√°ximo (simplificado) s<sub>m√°x</sub> = 
              <strong>${format(s_max_mm/10)}</strong> cm (=${format(s_max_mm)} mm)</li>
          <li>Espa√ßamento adotado s<sub>adot</sub> = <strong>${format(s_adot_mm/10)}</strong> cm
              (=${format(s_adot_mm)} mm)</li>
          <li>Taxa transversal œÅ<sub>w</sub> = <strong>${format(rho_w*1000,3)}</strong> ‚Ä∞</li>
        </ul>

        <p class="note">
          Aten√ß√£o: este c√°lculo de cisalhamento √© <strong>simplificado</strong> (Œ∏ ‚âà 45¬∞,
          n√£o verifica VRd,2 e VRd,c completos). Para projeto profissional, √© obrigat√≥rio usar
          todos os crit√©rios da NBR 6118 (incluindo limites m√≠nimos de estribos, verifica√ß√£o
          da pun√ß√£o quando aplic√°vel, etc.).
        </p>

        <p class="note">
          Sugest√£o pr√°tica: a partir de As adotada, escolha n√∫mero de barras e di√¢metro (ex.: 3√ò20, 4√ò20 etc.),
          calculando As_real = n¬∑œÄ¬∑√ò¬≤/4 e comparando com As_adot. Para estribos, ajuste √ò e espa√ßamento para
          valores comerciais (ex.: √ò6,3 c/15 cm).
        </p>
      `;
    }
  </script>
</body>
</html>
