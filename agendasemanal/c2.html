<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agenda Semanal com Autenticação</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
    <style>
      /* CSS mantido do código original */
      body { 
          font-family: 'Roboto', sans-serif; 
          padding: 20px; 
          background-color: #f4f7fb;
          color: #333; 
          margin: 0;
      }

      h1 { 
          text-align: center; 
          color: #2c3e50; 
          margin-bottom: 20px;
          font-size: 2em;
      }

      input[type="text"], input[type="password"], input[type="date"] {
          width: 100%; 
          padding: 12px; 
          margin: 12px 0; 
          border: 1px solid #ccc; 
          border-radius: 8px;
          box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
          font-size: 16px;
      }

      button { 
          background-color: #007bff; 
          color: white; 
          padding: 12px; 
          border: none; 
          border-radius: 8px; 
          width: 100%; 
          cursor: pointer; 
          font-size: 16px;
          transition: background-color 0.3s ease;
      }

      button:hover { 
          background-color: #0056b3; 
      }

      #login-container, #register-container, #main-menu-container, #terms-container { 
          display: none; 
      }

      .terms-text { 
          font-size: 14px; 
          color: #555; 
          margin-top: 20px; 
      }

      .terms-text a { 
          color: #007bff; 
          text-decoration: none; 
      }

      .privacy-policy { 
          font-size: 14px; 
          color: #555; 
          margin-top: 10px; 
      }

      footer { 
          text-align: center; 
          font-size: 14px; 
          margin-top: 40px; 
          color: #555; 
          padding: 20px 0; 
          background-color: #f8f9fa; 
          border-top: 1px solid #ddd;
      }

      @media (max-width: 768px) {
          body {
              padding: 10px;
          }

          h1 {
              font-size: 1.5em;
          }

          input[type="text"], input[type="password"], input[type="date"], button {
              font-size: 14px;
          }

          footer {
              font-size: 12px;
          }
      }

      @media (max-width: 480px) {
          h1 {
              font-size: 1.2em;
          }

          input[type="text"], input[type="password"], input[type="date"], button {
              font-size: 12px;
          }

          footer {
              font-size: 10px;
              padding: 10px 0;
          }
      }
    </style>
</head>
<body>

    <!-- Tela de Login -->
    <div id="login-container">
        <h1>Login</h1>
        <input type="text" id="username" placeholder="Nome de usuário" autocomplete="username">
        <input type="password" id="password" placeholder="Senha" autocomplete="current-password">
        <button onclick="login()">Login</button>
        <p>Não tem uma conta? <a href="#" onclick="showRegister()">Registre-se</a></p>
    </div>

    <!-- Tela de Registro -->
    <div id="register-container">
        <h1>Registro</h1>
        <input type="text" id="register-username" placeholder="Nome de usuário" autocomplete="username">
        <input type="password" id="register-password" placeholder="Senha (até 4 números)" autocomplete="new-password">
        <button onclick="register()">Registrar</button>
        <p>Já tem uma conta? <a href="#" onclick="showLogin()">Faça Login</a></p>
    </div>

    <!-- Tela de Termos e Políticas -->
    <div id="terms-container">
        <h1>Termos de Uso</h1>
        <p class="terms-text">
            Ao usar este aplicativo, você concorda com os <a href="#" onclick="showTermsDetails()">Termos de Uso</a> e a nossa <a href="#" onclick="showPrivacyPolicy()">Política de Privacidade</a>.
        </p>

        <!-- Texto dos Termos de Uso -->
        <p class="terms-text" id="terms-details" style="display:none;">
            Estes são os termos e condições para o uso deste aplicativo. Ao aceitar, você concorda em cumprir as normas e políticas definidas.
            <br>1. Uso de dados - Este aplicativo pode coletar dados para melhorar a experiência do usuário.
            <br>2. Responsabilidade - O usuário é responsável por todas as informações fornecidas.
        </p>

        <!-- Texto da Política de Privacidade -->
        <p class="privacy-policy" id="privacy-policy" style="display:none;">
            Nossa política de privacidade explica como coletamos, usamos e protegemos suas informações pessoais.
            <br>1. Coleta de dados - Coletamos dados como nome e senha para autenticação.
            <br>2. Uso de dados - Seus dados não serão compartilhados com terceiros sem seu consentimento.
        </p>

        <button onclick="acceptTerms()">Aceitar</button>
        <button onclick="rejectTerms()">Recusar</button>
    </div>

    <!-- Tela Principal com os 4 Botões -->
    <div id="main-menu-container">
        <h1>Bem-vindo ao Aplicativo</h1>
        <button onclick="navigateTo('treino')">Plano de Treino</button>
        <button onclick="navigateTo('treino-cardiovascular')">Treino Cardiovascular</button>
        <button onclick="navigateTo('relatorios')">Relatórios</button>
        <button onclick="navigateTo('configuracoes')">Configurações</button>
        <button onclick="logout()">Sair</button>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
    <script>
        // Configuração do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyAIp-rFuZZsBCNVJ3pSge4TE-XUuwYygrI",
            authDomain: "agenda-6accc.firebaseapp.com",
            databaseURL: "https://agenda-6accc-default-rtdb.firebaseio.com",
            projectId: "agenda-6accc",
            storageBucket: "agenda-6accc.appspot.com",
            messagingSenderId: "205960633520",
            appId: "1:205960633520:web:c9b1b9e166a8e3daed1dc6"
        };

        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        let currentUserId = null;

        window.onload = function() {
            checkUserLoggedIn();
        }

        function checkUserLoggedIn() {
            // Verifica se o usuário está autenticado
            if (currentUserId === null) {
                showLogin();
            } else {
                showMainMenu();
            }
        }

        function showLogin() {
            document.getElementById('login-container').style.display = 'block';
            document.getElementById('register-container').style.display = 'none';
            document.getElementById('terms-container').style.display = 'none';
            document.getElementById('main-menu-container').style.display = 'none';
        }

        function showRegister() {
            document.getElementById('login-container').style.display = 'none';
            document.getElementById('register-container').style.display = 'block';
        }

        function showTerms() {
            document.getElementById('terms-container').style.display = 'block';
        }

        function showPrivacyPolicy() {
            document.getElementById('privacy-policy').style.display = 'block';
        }

        function acceptTerms() {
            document.getElementById('terms-container').style.display = 'none';
            showMainMenu();
        }

        function rejectTerms() {
            document.getElementById('terms-container').style.display = 'none';
            alert('Você precisa aceitar os termos para usar o aplicativo.');
        }

        function showMainMenu() {
            document.getElementById('login-container').style.display = 'none';
            document.getElementById('register-container').style.display = 'none';
            document.getElementById('terms-container').style.display = 'none';
            document.getElementById('main-menu-container').style.display = 'block';
        }

        function navigateTo(page) {
            alert(`Navegando para a página: ${page}`);
        }

        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            // Simulação de login
            currentUserId = username; // Exemplo de identificação do usuário
            showTerms(); // Exibe a tela de termos
        }

        function logout() {
            currentUserId = null;
            showLogin(); // Exibe a tela de login
        }
    </script>
</body>
</html>

