<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conversor de Unidades de Engenharia</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
            color: #333;
            transition: background-color 0.5s, color 0.5s;
        }
        h1 {
            text-align: center;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        label {
            display: block;
            margin: 10px 0 5px;
        }
        select, input {
            width: 100%;
            padding: 10px;
            margin: 5px 0 20px;
            border: 1px solid #ccc;
            border-radius: 4px;
            transition: border 0.3s;
        }
        select:focus, input:focus {
            border: 1px solid #007bff;
            outline: none;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #0056b3;
        }
        .result {
            font-size: 1.2em;
            margin-top: 10px;
            color: #007bff;
        }
        .error {
            color: red;
        }
        .history {
            margin-top: 20px;
            border-top: 1px solid #ccc;
            padding-top: 10px;
        }
        .history-item {
            margin: 5px 0;
            padding: 10px;
            background: #f9f9f9;
            border-left: 5px solid #007bff;
            transition: background 0.3s;
        }
        .history-item:hover {
            background: #e9e9e9;
        }
        #themeToggle {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 5px 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <button id="themeToggle">Alternar Tema</button>
    <div class="container">
        <h1>Conversor de Unidades de Engenharia</h1>
        <label for="measureType">Tipo de Medida:</label>
        <select id="measureType" onchange="updateConversions()"></select>

        <label for="fromUnit">De:</label>
        <select id="fromUnit"></select>

        <label for="value">Valor:</label>
        <input type="number" id="value" placeholder="Insira o valor" min="0">

        <label for="toUnit">Para:</label>
        <select id="toUnit"></select>

        <button onclick="convert()">Converter</button>
        <div id="result" class="result"></div>
        <div id="error" class="error"></div>

        <div class="history" id="history">
            <h3>Histórico de Conversões</h3>
            <button onclick="clearHistory()">Limpar Histórico</button>
        </div>
    </div>

    <script>
        const conversions = {
            length: {
                units: ["m", "km", "cm", "mm", "mi", "yd", "ft", "in"],
                factors: { "m": 1, "km": 1000, "cm": 0.01, "mm": 0.001, "mi": 1609.34, "yd": 0.9144, "ft": 0.3048, "in": 0.0254 },
                convert(value, fromUnit, toUnit) {
                    const baseValue = value / this.factors[fromUnit];
                    return baseValue * this.factors[toUnit];
                }
            },
            area: {
                units: ["m2", "ha", "ac", "ft2", "km2", "mi2"],
                factors: { "m2": 1, "ha": 10000, "ac": 4046.86, "ft2": 0.092903, "km2": 1000000, "mi2": 2589988.11 },
                convert(value, fromUnit, toUnit) {
                    const baseValue = value / this.factors[fromUnit];
                    return baseValue * this.factors[toUnit];
                }
            },
            volume: {
                units: ["m3", "l", "ml", "ft3", "in3", "gal"],
                factors: { "m3": 1, "l": 0.001, "ml": 0.000001, "ft3": 0.0283168, "in3": 0.0000163871, "gal": 0.00378541 },
                convert(value, fromUnit, toUnit) {
                    const baseValue = value / this.factors[fromUnit];
                    return baseValue * this.factors[toUnit];
                }
            },
            mass: {
                units: ["kg", "g", "mg", "lb", "oz", "t"],
                factors: { "kg": 1, "g": 0.001, "mg": 0.000001, "lb": 0.453592, "oz": 0.0283495, "t": 1000 },
                convert(value, fromUnit, toUnit) {
                    const baseValue = value / this.factors[fromUnit];
                    return baseValue * this.factors[toUnit];
                }
            },
            temperature: {
                units: ["C", "F", "K"],
                convert(value, fromUnit, toUnit) {
                    if (fromUnit === "C") {
                        return toUnit === "F" ? (value * 9/5) + 32 : value + 273.15;
                    } else if (fromUnit === "F") {
                        return toUnit === "C" ? (value - 32) * 5/9 : ((value - 32) * 5/9) + 273.15;
                    } else {
                        return toUnit === "C" ? value - 273.15 : (value - 273.15) * 9/5 + 32;
                    }
                }
            },
            pressure: {
                units: ["Pa", "kPa", "MPa", "bar", "psi", "atm"],
                factors: { "Pa": 1, "kPa": 1000, "MPa": 1000000, "bar": 100000, "psi": 6894.76, "atm": 101325 },
                convert(value, fromUnit, toUnit) {
                    const baseValue = value / this.factors[fromUnit];
                    return baseValue * this.factors[toUnit];
                }
            },
            force: {
                units: ["N", "kN", "lb_f", "oz_f"],
                factors: { "N": 1, "kN": 1000, "lb_f": 4.44822, "oz_f": 0.278013 },
                convert(value, fromUnit, toUnit) {
                    const baseValue = value / this.factors[fromUnit];
                    return baseValue * this.factors[toUnit];
                }
            },
            energy: {
                units: ["J", "kJ", "cal", "kcal", "Wh", "kWh"],
                factors: { "J": 1, "kJ": 1000, "cal": 4.184, "kcal": 4184, "Wh": 3600, "kWh": 3600000 },
                convert(value, fromUnit, toUnit) {
                    const baseValue = value / this.factors[fromUnit];
                    return baseValue * this.factors[toUnit];
                }
            },
            power: {
                units: ["W", "kW", "hp", "BTU/h"],
                factors: { "W": 1, "kW": 1000, "hp": 745.7, "BTU/h": 0.293071 },
                convert(value, fromUnit, toUnit) {
                    const baseValue = value / this.factors[fromUnit];
                    return baseValue * this.factors[toUnit];
                }
            },
            speed: {
                units: ["m/s", "km/h", "mph", "ft/s"],
                factors: { "m/s": 1, "km/h": 0.277778, "mph": 0.44704, "ft/s": 0.3048 },
                convert(value, fromUnit, toUnit) {
                    const baseValue = value / this.factors[fromUnit];
                    return baseValue * this.factors[toUnit];
                }
            },
            length: {
                units: ["m", "km", "cm", "mm", "mi", "yd", "ft", "in"],
                factors: { "m": 1, "km": 1000, "cm": 0.01, "mm": 0.001, "mi": 1609.34, "yd": 0.9144, "ft": 0.3048, "in": 0.0254 },
                convert(value, fromUnit, toUnit) {
                    const baseValue = value / this.factors[fromUnit];
                    return baseValue * this.factors[toUnit];
                }
            }
            // Adicione outras categorias conforme necessário
        };

        function initialize() {
            const measureTypeSelect = document.getElementById("measureType");
            Object.keys(conversions).forEach(type => {
                const option = document.createElement("option");
                option.value = type;
                option.textContent = type.charAt(0).toUpperCase() + type.slice(1);
                measureTypeSelect.appendChild(option);
            });
            updateConversions();
        }

        function updateConversions() {
            const measureType = document.getElementById("measureType").value;
            const fromUnitSelect = document.getElementById("fromUnit");
            const toUnitSelect = document.getElementById("toUnit");

            fromUnitSelect.innerHTML = "";
            toUnitSelect.innerHTML = "";

            conversions[measureType].units.forEach(unit => {
                const fromOption = document.createElement("option");
                fromOption.value = unit;
                fromOption.textContent = unit;
                fromUnitSelect.appendChild(fromOption);

                const toOption = document.createElement("option");
                toOption.value = unit;
                toOption.textContent = unit;
                toUnitSelect.appendChild(toOption);
            });
        }

        function convert() {
            const measureType = document.getElementById("measureType").value;
            const fromUnit = document.getElementById("fromUnit").value;
            const toUnit = document.getElementById("toUnit").value;
            const value = parseFloat(document.getElementById("value").value);
            const resultElement = document.getElementById("result");
            const errorElement = document.getElementById("error");

            errorElement.textContent = "";
            resultElement.textContent = "";

            if (isNaN(value) || value < 0) {
                errorElement.textContent = "Por favor, insira um valor válido.";
                return;
            }

            let result;
            if (measureType === "temperature") {
                result = conversions[measureType].convert(value, fromUnit, toUnit);
            } else {
                result = conversions[measureType].convert(value, fromUnit, toUnit);
            }

            resultElement.textContent = `Resultado: ${result.toFixed(2)} ${toUnit}`;
            addToHistory(value, fromUnit, result, toUnit);
        }

        function addToHistory(value, fromUnit, result, toUnit) {
            const historyElement = document.getElementById("history");
            const historyItem = document.createElement("div");
            historyItem.className = "history-item";
            historyItem.textContent = `${value} ${fromUnit} = ${result.toFixed(2)} ${toUnit}`;
            historyElement.appendChild(historyItem);
        }

        function clearHistory() {
            document.getElementById("history").innerHTML = '<h3>Histórico de Conversões</h3><button onclick="clearHistory()">Limpar Histórico</button>';
        }

        document.getElementById("themeToggle").onclick = function() {
            const body = document.body;
            body.style.backgroundColor = body.style.backgroundColor === 'black' ? '#f4f4f4' : 'black';
            body.style.color = body.style.color === 'white' ? '#333' : 'white';
        }

        initialize();
    </script>
</body>
</html>

