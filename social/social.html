<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social App with Firebase</title>
    <!-- Firebase App (dependência básica) -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <!-- Firebase Auth (para autenticação) -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
</head>
<body>
    <h1>Social App - Firebase Authentication</h1>

    <!-- Formulário de Registro -->
    <div>
        <h2>Registrar</h2>
        <label for="email">Email:</label>
        <input type="email" id="email" placeholder="Digite seu email">
        <br>
        <label for="password">Senha:</label>
        <input type="password" id="password" placeholder="Digite sua senha">
        <br>
        <button onclick="register()">Registrar</button>
    </div>

    <!-- Formulário de Login -->
    <div>
        <h2>Login</h2>
        <label for="emailLogin">Email:</label>
        <input type="email" id="emailLogin" placeholder="Digite seu email">
        <br>
        <label for="passwordLogin">Senha:</label>
        <input type="password" id="passwordLogin" placeholder="Digite sua senha">
        <br>
        <button onclick="login()">Login</button>
    </div>

    <!-- Botão de Logout -->
    <div>
        <h2>Logout</h2>
        <button onclick="logout()">Sair</button>
    </div>

    <script>
        // Configuração do Firebase
        var firebaseConfig = {
            apiKey: "AIzaSyAIp-rFuZZsBCNVJ3pSge4TE-XUuwYygrI",
            authDomain: "agenda-6accc.firebaseapp.com",
            databaseURL: "https://agenda-6accc-default-rtdb.firebaseio.com",
            projectId: "agenda-6accc",
            storageBucket: "agenda-6accc.appspot.com",
            messagingSenderId: "205960633520",
            appId: "1:205960633520:web:c9b1b9e166a8e3daed1dc6"
        };

        // Inicialização do Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        // Função de validação de e-mail
        function isValidEmail(email) {
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailPattern.test(email);
        }

        // Função de registro
        function register() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            if (!isValidEmail(email)) {
                alert("Por favor, insira um e-mail válido.");
                return;
            }

            if (email === "" || password === "") {
                alert("Por favor, preencha o email e a senha.");
                return;
            }

            auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    alert('Usuário registrado com sucesso!');
                    console.log("Registro bem-sucedido:", userCredential);
                })
                .catch((error) => {
                    console.error("Erro ao registrar:", error);
                    alert(error.message);
                });
        }

        // Função de login
        function login() {
            const email = document.getElementById('emailLogin').value;
            const password = document.getElementById('passwordLogin').value;

            if (!isValidEmail(email)) {
                alert("Por favor, insira um e-mail válido.");
                return;
            }

            if (email === "" || password === "") {
                alert("Por favor, preencha o email e a senha.");
                return;
            }

            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    alert('Login realizado com sucesso!');
                    console.log("Login bem-sucedido:", userCredential);
                })
                .catch((error) => {
                    console.error("Erro ao fazer login:", error);
                    alert(error.message);
                });
        }

        // Função de logout
        function logout() {
            auth.signOut().then(() => {
                alert('Logout realizado com sucesso!');
            }).catch((error) => {
                console.error("Erro ao fazer logout:", error);
            });
        }
    </script>
</body>
</html>
